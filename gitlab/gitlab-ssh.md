## Push的两种方式

对于gitlab来说，有两种方式可以进行push，分别是https和ssh，其中使用前者需要每次push都完整的输入账户名和密码，确保安全性，但是有时候在办公电脑上
进行push的时候，不断的输入用户名和密码是非常低效率的，此时，可以使用ssh key的方式来配置免密push。

## ssh与keygen

ssh是用于远程通信的安全外壳协议，使用ssh协议的初衷是为了远程的，安全的控制主机。

keygen可以生成一堆密钥，拥有不同的算法，其中，常见的RSA算法会生成一组 **id_rsa.pub** 和 **id_rsa** , pub后缀的是公钥，不带后缀的是私钥。

公钥和私钥组合在一起能够运算出ssh的密码组合，当我们把公钥传输给gitlab之后，每当我们需要验证gitlab的账号时，gitlab会将公钥传输到本地，本地的私钥与公钥组合计算即可得到密码组合。
这样的方式可以不用传送私钥，保证了信息的安全，同时也不必输入密码，非常便捷。

## 生成本地的RSA公钥和私钥

在本地生成一组公钥和私钥，一般都是使用ssh-keygen工具来生成，原本这个工具只能在Unix和Linux上进行使用，不过如果安装了git bash，那么在windows上也能够轻松的创建私钥和公钥。

首先进入git bash，切换到用户根目录下：

```shell
 cd ~
```
使用ssh-keygen来生成一组公钥和密钥：

```shell
 ssh-keygen -t rsa -C "your_email@example.com"
```
这里的两个参数中， **-t** 是选择加密的算法，默认是rsa，这是基于SHA-2的加密算法，也可以选择dsa。
**-C** 参数是对密钥进行注释的文字，一般填写自己的邮箱账号，如果是有多个在不同的git管理平台上进行ssh配置的话，也可以选择填写gitlab。

在你生成密钥和私钥的过程中，会提示你输入密码，此时，直接点击回车键即可实现免密。

## 在gitlab上配置authorized公钥

在gitlab中，首先进入用户的管理界面，打开Profile settings. 在弹出来的导航栏中选择SSH keys配置界面，然后打开刚刚生成的公钥，即在 **~/.ssh/rsa.pub** 文件中的内容。
复制文件中的所有内容，将其黏贴到ssh key配置界面的 'Key' 输入框中。

此时，一般会根据你的注释自动生成这个公钥的名字，你也可以对这个名字进行修改，以便于和同邮箱或者同平台的其他密钥进行区分。

点击save之后，有可能出现提示说密钥格式不正确的情况，这是因为公钥在复制的时候，最后的换行符被添加了进来，只需删掉最后的换行符即可。

## 免密push

配置完成后，可以在本地进行ssh的git clone测试，可以发现，即便是自己的私有仓库，只要你配置正确的ssh key，即可不输入密码就将其拉去到本地。